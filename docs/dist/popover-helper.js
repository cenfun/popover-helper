!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("popover-helper",[],e):"object"==typeof exports?exports["popover-helper"]=e():t["popover-helper"]=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{defaultPositions:()=>p,getBestPosition:()=>a,getDefaultPositions:()=>l,getElement:()=>n,getRect:()=>r,toRect:()=>h});const i=t=>("number"!=typeof t&&(t=parseFloat(t)),isNaN(t)&&(t=0),t=Math.round(t)),o=t=>Boolean(t&&t===t.window),h=t=>t?{left:i(t.left),top:i(t.top),width:i(t.width),height:i(t.height)}:{left:0,top:0,width:0,height:0},n=t=>{return"string"==typeof t&&t?t.startsWith("#")?document.getElementById(t.slice(1)):document.querySelector(t):(e=t,Boolean(e&&9===e.nodeType)?t.body:(t=>Boolean(t&&1===t.nodeType))(t)?t:void 0);var e},r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t)return h();if(o(t))return{left:0,top:0,width:window.innerWidth,height:window.innerHeight};const i=n(t);if(!i)return h(t);const r=i.getBoundingClientRect(),p=h(r);return p.left+=window.pageXOffset,p.top+=window.pageYOffset,p.width=i.offsetWidth,p.height=i.offsetHeight,e&&(p.left-=e,p.top-=e,p.width+=2*e,p.height+=2*e),p},p={"bottom-center":{direction:"h",calculate:(t,e,i,o)=>{t.spacePosition=e.top+e.height-i.top-i.height-o.height,t.top=i.top+i.height,t.left=Math.round(i.left+.5*i.width-.5*o.width)}},"bottom-right":{direction:"h",calculate:(t,e,i,o)=>{t.spacePosition=e.top+e.height-i.top-i.height-o.height,t.top=i.top+i.height,t.left=Math.round(i.left+.5*i.width)}},"bottom-left":{direction:"h",calculate:(t,e,i,o)=>{t.spacePosition=e.top+e.height-i.top-i.height-o.height,t.top=i.top+i.height,t.left=Math.round(i.left+.5*i.width-o.width)}},"top-center":{direction:"h",calculate:(t,e,i,o)=>{t.spacePosition=i.top-o.height-e.top,t.top=i.top-o.height,t.left=Math.round(i.left+.5*i.width-.5*o.width)}},"top-right":{direction:"h",calculate:(t,e,i,o)=>{t.spacePosition=i.top-o.height-e.top,t.top=i.top-o.height,t.left=Math.round(i.left+.5*i.width)}},"top-left":{direction:"h",calculate:(t,e,i,o)=>{t.spacePosition=i.top-o.height-e.top,t.top=i.top-o.height,t.left=Math.round(i.left+.5*i.width-o.width)}},"right-center":{direction:"v",calculate:(t,e,i,o)=>{t.spacePosition=e.left+e.width-i.left-i.width-o.width,t.top=Math.round(i.top+.5*i.height-.5*o.height),t.left=i.left+i.width}},"right-bottom":{direction:"v",calculate:(t,e,i,o)=>{t.spacePosition=e.left+e.width-i.left-i.width-o.width,t.top=Math.round(i.top+.5*i.height),t.left=i.left+i.width}},"right-top":{direction:"v",calculate:(t,e,i,o)=>{t.spacePosition=e.left+e.width-i.left-i.width-o.width,t.top=Math.round(i.top+.5*i.height-o.height),t.left=i.left+i.width}},"left-center":{direction:"v",calculate:(t,e,i,o)=>{t.spacePosition=i.left-o.width-e.left,t.top=Math.round(i.top+.5*i.height-.5*o.height),t.left=i.left-o.width}},"left-bottom":{direction:"v",calculate:(t,e,i,o)=>{t.spacePosition=i.left-o.width-e.left,t.top=Math.round(i.top+.5*i.height),t.left=i.left-o.width}},"left-top":{direction:"v",calculate:(t,e,i,o)=>{t.spacePosition=i.left-o.width-e.left,t.top=Math.round(i.top+.5*i.height-o.height),t.left=i.left-o.width}}},l=t=>{const e=Object.keys(p);return t&&e.sort(((e,i)=>{const o=e.split("-"),h=i.split("-");let n=o.shift(),r=h.shift(),p=t.indexOf(n),l=t.indexOf(r);return p=-1===p?4:p,l=-1===l?4:l,p===l&&(n=o.shift(),r=h.shift(),p=t.indexOf(n),l=t.indexOf(r),p=-1===p?4:p,l=-1===l?4:l),p-l})),e},c=(t,e,i,o)=>{const h=i-t,n=t+e-(i+o);return Math.min(h,n)},d=(t,e,i,o,h,n,r)=>{const[p,l]=i.split("-");let d={...t,type:i,position:p,align:l,top:0,left:0,width:n.width,height:n.height,spacePosition:0,spaceAlign:0,priority:0,change:0,space:0,index:e};return d.calculate(d,o,h,n),delete d.calculate,d=((t,e)=>("h"===t.direction?t.spaceAlign+=c(e.left,e.width,t.left,t.width):t.spaceAlign+=c(e.top,e.height,t.top,t.height),t.space=Math.min(t.spacePosition,t.spaceAlign),t))(d,o),d=(t=>(t.spacePosition>=0&&(t.priority+=1),t.spaceAlign>=0&&(t.priority+=1),t))(d),d=((t,e)=>{if(!e)return t;if(t.type===e.type)return t;const i=t.left+.5*t.width,o=t.top+.5*t.height,h=e.left+.5*e.width,n=e.top+.5*e.height,r=Math.abs(i-h),p=Math.abs(o-n);return t.change=Math.round(Math.sqrt(r*r+p*p)),t})(d,r),d},a=(t,e,i,o,h)=>{const n=l();let r=!0,c=((t,e)=>{if(!t)return;t instanceof Array||(t=[t]);const i={};t.forEach((t=>{t=`${t}`.trim().toLowerCase(),p[t]?i[t]=!0:t&&e.forEach((e=>{-1!==e.indexOf(t)&&(i[e]=!0)}))}));const o=Object.keys(i);return o.length?o:void 0})(o,n);c||(c=n,r=!1);const a=c.map(((o,n)=>d(p[o],n,o,t,e,i,h)));return a.sort(((t,e)=>t.priority!==e.priority?e.priority-t.priority:h&&2===t.priority?t.change-e.change:r?t.index-e.index:t.space!==e.space?e.space-t.space:t.index-e.index)),a[0]};return e})()));