{"version":3,"file":"popover-helper.js","mappings":"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","sources":["webpack://popover-helper/webpack/universalModuleDefinition","webpack://popover-helper/webpack/bootstrap","webpack://popover-helper/webpack/runtime/define property getters","webpack://popover-helper/webpack/runtime/hasOwnProperty shorthand","webpack://popover-helper/webpack/runtime/make namespace object","webpack://popover-helper/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"popover-helper\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"popover-helper\"] = factory();\n\telse\n\t\troot[\"popover-helper\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const toNum = (num) => {\r\n    if (typeof (num) !== 'number') {\r\n        num = parseFloat(num);\r\n    }\r\n    if (isNaN(num)) {\r\n        num = 0;\r\n    }\r\n    num = Math.round(num);\r\n    return num;\r\n};\r\n\r\nconst isWindow = (obj) => {\r\n    return Boolean(obj && obj === obj.window);\r\n};\r\n\r\nconst isDocument = (obj) => {\r\n    return Boolean(obj && obj.nodeType === 9);\r\n};\r\n\r\nconst isElement = (obj) => {\r\n    return Boolean(obj && obj.nodeType === 1);\r\n};\r\n\r\nexport const toRect = (obj) => {\r\n    if (obj) {\r\n        return {\r\n            left: toNum(obj.left),\r\n            top: toNum(obj.top),\r\n            width: toNum(obj.width),\r\n            height: toNum(obj.height)\r\n        };\r\n    }\r\n    return {\r\n        left: 0,\r\n        top: 0,\r\n        width: 0,\r\n        height: 0\r\n    };\r\n};\r\n\r\nexport const getElement = (selector) => {\r\n    if (typeof selector !== 'string') {\r\n        if (isDocument(selector)) {\r\n            return selector.body;\r\n        }\r\n        if (isElement(selector)) {\r\n            return selector;\r\n        }\r\n        return;\r\n    }\r\n    if (selector.startsWith('#')) {\r\n        return document.getElementById(selector.substr(1));\r\n    }\r\n    return document.querySelector(selector);\r\n};\r\n\r\nexport const getRect = (target) => {\r\n    if (!target) {\r\n        return toRect();\r\n    }\r\n\r\n    if (isWindow(target)) {\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n        };\r\n    }\r\n\r\n    const elem = getElement(target);\r\n    if (!elem) {\r\n        return toRect(target);\r\n    }\r\n\r\n    const br = elem.getBoundingClientRect();\r\n    const rect = toRect(br);\r\n\r\n    //fix offset\r\n    rect.left += window.pageXOffset;\r\n    rect.top += window.pageYOffset;\r\n    rect.width = elem.offsetWidth;\r\n    rect.height = elem.offsetHeight;\r\n\r\n    //console.log(elem.tagName, rect);\r\n\r\n    return rect;\r\n};\r\n\r\n//===========================================================================================\r\n\r\nexport const defaultPositions = {\r\n\r\n    'bottom-center': {\r\n        direction: 'h',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = containerRect.top + containerRect.height - targetRect.top - targetRect.height - rect.height;\r\n            info.top = targetRect.top + targetRect.height;\r\n            info.left = Math.round(targetRect.left + targetRect.width * 0.5 - rect.width * 0.5);\r\n        }\r\n    },\r\n\r\n    'bottom-right': {\r\n        direction: 'h',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = containerRect.top + containerRect.height - targetRect.top - targetRect.height - rect.height;\r\n            info.top = targetRect.top + targetRect.height;\r\n            info.left = Math.round(targetRect.left + targetRect.width * 0.5);\r\n        }\r\n    },\r\n\r\n    'bottom-left': {\r\n        direction: 'h',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = containerRect.top + containerRect.height - targetRect.top - targetRect.height - rect.height;\r\n            info.top = targetRect.top + targetRect.height;\r\n            info.left = Math.round(targetRect.left + targetRect.width * 0.5 - rect.width);\r\n        }\r\n    },\r\n\r\n    //===========================================================================================\r\n\r\n    'top-center': {\r\n        direction: 'h',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = targetRect.top - rect.height - containerRect.top;\r\n            info.top = targetRect.top - rect.height;\r\n            info.left = Math.round(targetRect.left + targetRect.width * 0.5 - rect.width * 0.5);\r\n        }\r\n    },\r\n\r\n    'top-right': {\r\n        direction: 'h',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = targetRect.top - rect.height - containerRect.top;\r\n            info.top = targetRect.top - rect.height;\r\n            info.left = Math.round(targetRect.left + targetRect.width * 0.5);\r\n        }\r\n    },\r\n\r\n    'top-left': {\r\n        direction: 'h',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = targetRect.top - rect.height - containerRect.top;\r\n            info.top = targetRect.top - rect.height;\r\n            info.left = Math.round(targetRect.left + targetRect.width * 0.5 - rect.width);\r\n        }\r\n    },\r\n\r\n    //===========================================================================================\r\n\r\n    'right-center': {\r\n        direction: 'v',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = containerRect.left + containerRect.width - targetRect.left - targetRect.width - rect.width;\r\n            info.top = Math.round(targetRect.top + targetRect.height * 0.5 - rect.height * 0.5);\r\n            info.left = targetRect.left + targetRect.width;\r\n        }\r\n    },\r\n\r\n    'right-bottom': {\r\n        direction: 'v',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = containerRect.left + containerRect.width - targetRect.left - targetRect.width - rect.width;\r\n            info.top = Math.round(targetRect.top + targetRect.height * 0.5);\r\n            info.left = targetRect.left + targetRect.width;\r\n        }\r\n    },\r\n\r\n    'right-top': {\r\n        direction: 'v',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = containerRect.left + containerRect.width - targetRect.left - targetRect.width - rect.width;\r\n            info.top = Math.round(targetRect.top + targetRect.height * 0.5 - rect.height);\r\n            info.left = targetRect.left + targetRect.width;\r\n        }\r\n    },\r\n\r\n    //===========================================================================================\r\n\r\n    'left-center': {\r\n        direction: 'v',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = targetRect.left - rect.width - containerRect.left;\r\n            info.top = Math.round(targetRect.top + targetRect.height * 0.5 - rect.height * 0.5);\r\n            info.left = targetRect.left - rect.width;\r\n        }\r\n    },\r\n\r\n    'left-bottom': {\r\n        direction: 'v',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = targetRect.left - rect.width - containerRect.left;\r\n            info.top = Math.round(targetRect.top + targetRect.height * 0.5);\r\n            info.left = targetRect.left - rect.width;\r\n        }\r\n    },\r\n\r\n    'left-top': {\r\n        direction: 'v',\r\n        calculate: (info, containerRect, targetRect, rect) => {\r\n            info.spacePosition = targetRect.left - rect.width - containerRect.left;\r\n            info.top = Math.round(targetRect.top + targetRect.height * 0.5 - rect.height);\r\n            info.left = targetRect.left - rect.width;\r\n        }\r\n    }\r\n};\r\n\r\nexport const getDefaultPositions = (sortKeys) => {\r\n    const list = Object.keys(defaultPositions);\r\n\r\n    if (sortKeys) {\r\n        list.sort((a, b) => {\r\n            // part left\r\n            const al = a.split('-');\r\n            const bl = b.split('-');\r\n            let av = al.shift();\r\n            let bv = bl.shift();\r\n            let ai = sortKeys.indexOf(av);\r\n            let bi = sortKeys.indexOf(bv);\r\n            ai = ai === -1 ? 4 : ai;\r\n            bi = bi === -1 ? 4 : bi;\r\n            if (ai === bi) {\r\n                //right part\r\n                av = al.shift();\r\n                bv = bl.shift();\r\n                ai = sortKeys.indexOf(av);\r\n                bi = sortKeys.indexOf(bv);\r\n                ai = ai === -1 ? 4 : ai;\r\n                bi = bi === -1 ? 4 : bi;\r\n            }\r\n            return ai - bi;\r\n        });\r\n    }\r\n\r\n    return list;\r\n};\r\n\r\n//===========================================================================================\r\n\r\nconst getSpaceAlign = (containerStart, containerSize, start, size) => {\r\n    const s = start - containerStart;\r\n    const e = (containerStart + containerSize) - (start + size);\r\n    return Math.min(s, e);\r\n};\r\n\r\nconst calculateSpace = (info, containerRect) => {\r\n    if (info.direction === 'h') {\r\n        info.spaceAlign += getSpaceAlign(containerRect.left, containerRect.width, info.left, info.width);\r\n    } else {\r\n        info.spaceAlign += getSpaceAlign(containerRect.top, containerRect.height, info.top, info.height);\r\n    }\r\n    info.space = Math.min(info.spacePosition, info.spaceAlign);\r\n    return info;\r\n};\r\n\r\nconst calculatePriority = (info) => {\r\n    if (info.spacePosition >= 0) {\r\n        info.priority += 1;\r\n    }\r\n    if (info.spaceAlign >= 0) {\r\n        info.priority += 1;\r\n    }\r\n    return info;\r\n};\r\n\r\nconst calculateChange = (info, previousInfo) => {\r\n    if (!previousInfo) {\r\n        return info;\r\n    }\r\n    //no change if type no change with previous\r\n    if (info.type === previousInfo.type) {\r\n        return info;\r\n    }\r\n    const ax = info.left + info.width * 0.5;\r\n    const ay = info.top + info.height * 0.5;\r\n    const bx = previousInfo.left + previousInfo.width * 0.5;\r\n    const by = previousInfo.top + previousInfo.height * 0.5;\r\n    const dx = Math.abs(ax - bx);\r\n    const dy = Math.abs(ay - by);\r\n    info.change = Math.round(Math.sqrt(dx * dx + dy * dy));\r\n    return info;\r\n};\r\n\r\nconst calculatePositionInfo = (defaultInfo, index, type, containerRect, targetRect, rect, previousInfo) => {\r\n    const [position, align] = type.split('-');\r\n    let info = {\r\n        ... defaultInfo,\r\n        type,\r\n        position,\r\n        align,\r\n        top: 0,\r\n        left: 0,\r\n        width: rect.width,\r\n        height: rect.height,\r\n        spacePosition: 0,\r\n        spaceAlign: 0,\r\n        priority: 0,\r\n        change: 0,\r\n        space: 0,\r\n        index\r\n    };\r\n    info.calculate(info, containerRect, targetRect, rect);\r\n    delete info.calculate;\r\n    info = calculateSpace(info, containerRect);\r\n    info = calculatePriority(info);\r\n    info = calculateChange(info, previousInfo);\r\n    return info;\r\n};\r\n\r\nconst getTypeList = (positions, defaultList) => {\r\n    if (!positions) {\r\n        return;\r\n    }\r\n    if (!(positions instanceof Array)) {\r\n        positions = [positions];\r\n    }\r\n    const map = {};\r\n    positions.forEach((item) => {\r\n        item = (`${item}`).trim().toLowerCase();\r\n        if (defaultPositions[item]) {\r\n            map[item] = true;\r\n            return;\r\n        }\r\n        if (!item) {\r\n            return;\r\n        }\r\n        defaultList.forEach((pd) => {\r\n            if (pd.indexOf(item) !== -1) {\r\n                map[pd] = true;\r\n            }\r\n        });\r\n    });\r\n    const list = Object.keys(map);\r\n    if (!list.length) {\r\n        return;\r\n    }\r\n    return list;\r\n};\r\n\r\nexport const getBestPosition = (containerRect, targetRect, rect, positions, previousInfo) => {\r\n\r\n    const defaultList = getDefaultPositions();\r\n    let typeList = getTypeList(positions, defaultList);\r\n    if (!typeList) {\r\n        typeList = defaultList;\r\n    }\r\n\r\n    const infoList = typeList.map((type, i) => {\r\n        return calculatePositionInfo(defaultPositions[type], i, type, containerRect, targetRect, rect, previousInfo);\r\n    });\r\n\r\n    infoList.sort((a, b) => {\r\n        if (a.priority !== b.priority) {\r\n            return b.priority - a.priority;\r\n        }\r\n        if (previousInfo && a.priority === 2) {\r\n            return a.change - b.change;\r\n        }\r\n        if (a.space !== b.space) {\r\n            return b.space - a.space;\r\n        }\r\n        return a.index - b.index;\r\n    });\r\n\r\n    //console.table(infoList);\r\n\r\n    return infoList[0];\r\n};\r\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","toNum","num","parseFloat","isNaN","Math","round","toRect","left","top","width","height","getElement","selector","Boolean","nodeType","body","isElement","startsWith","document","getElementById","substr","querySelector","getRect","target","window","innerWidth","innerHeight","elem","br","getBoundingClientRect","rect","pageXOffset","pageYOffset","offsetWidth","offsetHeight","defaultPositions","direction","calculate","info","containerRect","targetRect","spacePosition","getDefaultPositions","sortKeys","list","keys","sort","a","b","al","split","bl","av","shift","bv","ai","indexOf","bi","getSpaceAlign","containerStart","containerSize","start","size","s","e","min","calculatePositionInfo","defaultInfo","index","type","previousInfo","position","align","spaceAlign","priority","change","space","calculateSpace","calculatePriority","ax","ay","bx","by","dx","abs","dy","sqrt","calculateChange","getBestPosition","positions","defaultList","typeList","Array","map","forEach","item","trim","toLowerCase","pd","length","getTypeList","infoList","i"],"sourceRoot":""}